<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—Ä—Å–∫–æ–π –ë–æ–π - –°–µ—Ç–µ–≤–∞—è –ê—Ä–µ–Ω–∞</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <meta name="csrf-token" id="csrf-token">
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öì –ú–æ—Ä—Å–∫–æ–π –ë–æ–π - –°–µ—Ç–µ–≤–∞—è –ê—Ä–µ–Ω–∞</h1>
            <p class="subtitle">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∏–≥—Ä—ã —Å –ò–ò –∏ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–æ–º</p>
        </header>

        <div class="game-setup" id="gameSetup">
            <h2>–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</h2>
            <div class="setup-options">
                <div class="option">
                    <h3>üéÆ –ò–≥—Ä–∞ –ø—Ä–æ—Ç–∏–≤ –ò–ò</h3>
                    <input type="text" id="playerNameAI" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20" value="–ò–≥—Ä–æ–∫1">
                    <button onclick="startGameAI()" class="btn btn-primary">–ò–≥—Ä–∞—Ç—å —Å –ò–ò</button>
                    <p class="hint">–ò–≥—Ä–∞ —Å —É–º–Ω—ã–º –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–º</p>
                </div>
                
                <div class="option">
                    <h3>üë• –°–æ–∑–¥–∞—Ç—å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω—É—é –∏–≥—Ä—É</h3>
                    <input type="text" id="playerNameHost" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20" value="–•–æ—Å—Ç">
                    <button onclick="createMultiplayerRoom()" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                    <p class="hint">–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–≥–∞</p>
                </div>
                
                <div class="option">
                    <h3>üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</h3>
                    <input type="text" id="playerNameJoin" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20" value="–ò–≥—Ä–æ–∫2">
                    <input type="text" id="gameCode" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (6 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="6">
                    <button onclick="joinMultiplayerRoom()" class="btn btn-secondary">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                    <p class="hint">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã –æ—Ç –¥—Ä—É–≥–∞</p>
                </div>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–æ–±–±–∏ (–º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä) -->
        <div class="lobby-container" id="lobbyContainer" style="display: none;">
            <h2>üë• –õ–æ–±–±–∏: <span id="lobbyCode"></span></h2>
            
            <div class="lobby-info">
                <div class="player-list">
                    <h3>–ò–≥—Ä–æ–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ:</h3>
                    <div id="playerList">
                        <div class="player-item waiting">
                            <span class="player-name" id="player1Name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            <span class="player-status" id="player1Status">–æ–∂–∏–¥–∞–Ω–∏–µ</span>
                        </div>
                        <div class="player-item waiting">
                            <span class="player-name" id="player2Name">–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞...</span>
                            <span class="player-status" id="player2Status">–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span>
                        </div>
                    </div>
                </div>
                
                <div class="lobby-controls">
                    <button onclick="copyRoomCode()" class="btn btn-secondary" id="copyCodeBtn">
                        üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                    </button>
                    <button onclick="readyForGame()" class="btn btn-success" id="readyButtonLobby">
                        ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ
                    </button>
                    <button onclick="leaveLobby()" class="btn btn-warning">
                        üö™ –ü–æ–∫–∏–Ω—É—Ç—å –ª–æ–±–±–∏
                    </button>
                </div>
                
                <div class="lobby-messages" id="lobbyMessages">
                    <div class="message">–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞. –û–∂–∏–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞...</div>
                </div>
            </div>
            
            <div class="lobby-chat" id="lobbyChat" style="display: none;">
                <h3>üí¨ –ß–∞—Ç</h3>
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="200">
                    <button onclick="sendChatMessage()" class="btn btn-small">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ—Ä–∞–±–ª–µ–π -->
        <div class="placement-container" id="placementContainer" style="display: none;">
            <h2>üö¢ –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä–∞–±–ª–µ–π</h2>
            
            <div class="placement-header">
                <p>–ò–≥—Ä–∞: <span id="placementGameId"></span></p>
                <p>–°—Ç–∞—Ç—É—Å: <span id="placementStatus">–†–∞—Å—Å—Ç–∞–≤–ª—è–π—Ç–µ –∫–æ—Ä–∞–±–ª–∏</span></p>
                <p>–í—ã: <span id="placementPlayerName"></span></p>
                <div id="opponentPlacementStatus" class="opponent-status">
                    –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫: <span>—Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ—Ä–∞–±–ª–∏</span>
                </div>
            </div>
            
            <div class="ship-list">
                <h3>–ö–æ—Ä–∞–±–ª–∏ –¥–ª—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏:</h3>
                <ul>
                    <li>4-–ø–∞–ª—É–±–Ω—ã–π: <span id="ship4">1</span> –æ—Å—Ç–∞–ª–æ—Å—å</li>
                    <li>3-–ø–∞–ª—É–±–Ω—ã–π: <span id="ship3">2</span> –æ—Å—Ç–∞–ª–æ—Å—å</li>
                    <li>2-–ø–∞–ª—É–±–Ω—ã–π: <span id="ship2">2</span> –æ—Å—Ç–∞–ª–æ—Å—å</li>
                    <li>1-–ø–∞–ª—É–±–Ω—ã–π: <span id="ship1">2</span> –æ—Å—Ç–∞–ª–æ—Å—å</li>
                </ul>
                <p class="total-ships">–í—Å–µ–≥–æ: <span id="totalShips">0</span>/7</p>
            </div>
            
            <div class="placement-controls">
                <div class="ship-selection">
                    <h4>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–∞–±–ª—å:</h4>
                    <div class="ship-buttons">
                        <button onclick="selectShip(4)" class="btn-ship">4-–ø–∞–ª—É–±–Ω—ã–π</button>
                        <button onclick="selectShip(3)" class="btn-ship">3-–ø–∞–ª—É–±–Ω—ã–π</button>
                        <button onclick="selectShip(2)" class="btn-ship">2-–ø–∞–ª—É–±–Ω—ã–π</button>
                        <button onclick="selectShip(1)" class="btn-ship">1-–ø–∞–ª—É–±–Ω—ã–π</button>
                    </div>
                    <div class="orientation">
                        <label>
                            <input type="radio" name="orientation" value="horizontal" checked 
                                onclick="changeOrientation('horizontal')">
                            –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
                        </label>
                        <label>
                            <input type="radio" name="orientation" value="vertical"
                                onclick="changeOrientation('vertical')">
                            –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ
                        </label>
                    </div>
                </div>
                
                <div class="placement-buttons">
                    <button onclick="autoPlaceAllShips()" class="btn btn-secondary">üé≤ –†–∞—Å—Å—Ç–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</button>
                    <button onclick="clearAllShips()" class="btn btn-warning">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ</button>
                    <button onclick="finishPlacement()" class="btn btn-primary" id="readyButton">‚úÖ –ì–æ—Ç–æ–≤ –∫ –±–æ—é!</button>
                </div>
            </div>
            
            <div class="placement-board">
                <h3>–í–∞—à–µ –ø–æ–ª–µ –¥–ª—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏</h3>
                <div id="placementBoard" class="board-grid"></div>
                <p class="hint">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–æ—Ä–∞–±–ª—å. –ö–æ—Ä–∞–±–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–ø—Ä–∏–∫–∞—Å–∞—Ç—å—Å—è!</p>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∏–≥—Ä—ã -->
        <div class="game-container" id="gameContainer" style="display: none;">
            <div class="game-header">
                <h2>‚öîÔ∏è –ò–≥—Ä–∞: <span id="gameIdDisplay"></span></h2>
                <div class="game-info">
                    <h3 id="attackStatus">–ê—Ç–∞–∫—É–π—Ç–µ!</h3>
                    <p>–ò–≥—Ä–æ–∫: <span id="playerIdDisplay">-</span></p>
                    <p>–¢–∏–ø –∏–≥—Ä—ã: <span id="gameTypeIndicator">-</span></p>
                    <p>–°—Ç–∞—Ç—É—Å: <span id="gameStatus">-</span></p>
                    <p>–•–æ–¥: <span id="turnIndicator">-</span></p>
                </div>
            </div>

            <div class="boards">
                <div class="board-container">
                    <h3>üè¥‚Äç‚ò†Ô∏è –í–∞—à–µ –ø–æ–ª–µ</h3>
                    <div id="playerBoard" class="board-grid"></div>
                    <div class="ship-legend">
                        <div class="legend-item"><span class="ship-cell"></span> - –ö–æ—Ä–∞–±–ª—å</div>
                        <div class="legend-item"><span class="hit-cell"></span> - –ü–æ–ø–∞–¥–∞–Ω–∏–µ</div>
                        <div class="legend-item"><span class="miss-cell"></span> - –ü—Ä–æ–º–∞—Ö</div>
                    </div>
                </div>

                <div class="board-container">
                    <h3>üéØ –ü–æ–ª–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h3>
                    <div id="opponentBoard" class="board-grid"></div>
                    <div class="controls">
                        <button onclick="surrender()" class="btn btn-danger">üè≥Ô∏è –°–¥–∞—Ç—å—Å—è</button>
                        <button onclick="restartGame()" class="btn btn-warning">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                    </div>
                </div>
            </div>

            <div class="game-log">
                <h3>üìú –ñ—É—Ä–Ω–∞–ª –∏–≥—Ä—ã</h3>
                <div id="gameLog" class="log-content">
                    <div class="log-entry">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–æ—Ä—Å–∫–æ–π –ë–æ–π!</div>
                </div>
            </div>
        </div>

        <footer>
            <p>–ü—Ä–æ–µ–∫—Ç –ø–æ —Å–µ—Ç–µ–≤–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è</p>
        </footer>
    </div>

    <script src="/script.js"></script>
</body>
</html>